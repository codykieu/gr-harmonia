id: harmonia_pdu_fft
label: PDU FFT
category: '[harmonia]'

parameters:
- id: nfft
  label: FFT size
  dtype: int
  default: 1024
- id: backend
  label: Backend
  dtype: enum
  options: [plasma.Device.DEFAULT, plasma.Device.CPU, plasma.Device.CUDA, plasma.Device.OPENCL]
  option_labels: [Default, CPU, Cuda, OpenCL]
- id: depth
  label: Message queue depth
  dtype: int
  default: 1
  hide: part
# Metadata keys
- id: fft_size
  label: FFT size key
  dtype: string
  default: 'fft_size'
  hide: part
  category: Metadata

inputs:
-   domain: message
    id: in

outputs:
-   domain: message
    id: out

templates:
  imports: from gnuradio import harmonia
  make: |-
    harmonia.pdu_fft(${nfft})
    self.${id}.set_msg_queue_depth(${depth})
    self.${id}.set_backend(${backend})
    self.${id}.set_metadata_keys(${fft_size})

#  'file_format' specifies the version of the GRC yml format used in the file
#  and should usually not be changed.
file_format: 1
